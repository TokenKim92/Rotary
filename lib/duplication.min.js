/*! For license information please see duplication.min.js.LICENSE.txt */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.DuplicateDraw=e():t.DuplicateDraw=e()}(self,(()=>(()=>{"use strict";var t={d:(e,i)=>{for(var s in i)t.o(i,s)&&!t.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:i[s]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},e={};t.d(e,{default:()=>n});class i{static INIT_MODE=-1;static SMALL_MODE=0;static REGULAR_MODE=1;static MEDIUM_MODE=2;static LARGE_MODE=3;#t;#e;#i;#s;#a;#h;#r;constructor(t=!1){this.#t=document.createElement("canvas"),this.#e=this.#t.getContext("2d"),document.body.append(this.#t),this.#i=window.devicePixelRatio>1?2:1,this.#h=t,this.#h&&this.#t.classList.add("canvas-full")}resize(t=0,e=0){this.#s=0===t?document.body.clientWidth:t,this.#a=0===e?document.body.clientHeight:e,this.#t.width=this.#s*this.#i,this.#t.height=this.#a*this.#i,this.#e.scale(this.#i,this.#i)}getSizeMode(){const t=[{mode:i.SMALL_MODE,size:500},{mode:i.REGULAR_MODE,size:1e3},{mode:i.MEDIUM_MODE,size:1980},{mode:i.LARGE_MODE,size:3840}],e=t.filter((t=>!window.matchMedia(`(max-width: ${t.size}px)`).matches)).length;return t[e].mode}clearCanvas(){this.#e.clearRect(0,0,this.#s,this.#a)}animateTarget(t,...e){return t(this.#e,...e)}saveCanvas(){this.#e.save()}restoreCanvas(){this.#e.restore()}addEventToCanvas(t,e){this.#t.addEventListener(t,e)}removeEventFromCanvas(t,e){this.#t.removeEventListener(t,e)}bringToStage(){document.body.append(this.#t)}removeFromStage(){this.clearCanvas(),document.body.removeChild(this.#t)}fill(){this.#e.fill()}fillRect(t,e,i,s){this.#e.fillRect(t,e,i,s)}fillText(t,e,i,s){this.#e.fillText(t,e,i,s)}measureText(t){return this.#e.measureText(t)}translate(t,e){this.#e.translate(t,e)}scale(t,e){this.#e.scale(t,e)}rotate(t){this.#e.rotate(t)}beginPath(){this.#e.beginPath()}stroke(){this.#e.stroke()}arc(t,e,i,s,a,h=!1){this.#e.arc(t,e,i,s,a,h)}moveTo(t,e){this.#e.moveTo(t,e)}lineTo(t,e){this.#e.lineTo(t,e)}drawImage(t,e,i,s,a,h,r,n,o){this.#e.drawImage(t,e,i,s,a,h,r,n,o)}getImageData(t,e,i,s,a){return this.#e.getImageData(t,e,i,s,a)}setPosition(t,e){if(this.#h)throw new Error("Positioning is not possible in full screen mode.");this.#t.style.left=`${t}px`,this.#t.style.top=`${e}px`}getFont(){return this.#e.font}setFont(t){return this.#e.font=t}getFillStyle(){return this.#e.fillStyle}setFillStyle(t){this.#e.fillStyle=t}getStrokeStyle(){return this.#e.strokeStyle}setStrokeStyle(t){this.#e.strokeStyle=t}getLineWidth(){return this.#e.lineWidth}setLineWidth(t){this.#e.lineWidth=t}getTextAlign(){return this.#e.textAlign}setTextAlign(t){return this.#e.textAlign=t}getTextBaseline(){return this.#e.textBaseline}setTextBaseline(t){this.#e.textBaseline=t}get stageWidth(){return this.#s}get stageHeight(){return this.#a}get pixelRatio(){return this.#i}}class s{#n;#o;#c;constructor(t,e,i){this.#n=t,this.#o=e,this.#c=i}get width(){return this.#n()}get size(){return this.#n()}get size(){return this.#n()}get font(){return`${this.#n} ${this.#o}px ${this.#c}`}}class a{#g;#l;#n;#d;constructor(t,e,i,s){this.#g=t,this.#l=e,this.#n=i,this.#d=s}get x(){return this.#g}set x(t){this.#g=t}get y(){return this.#l}set y(t){this.#l=t}get width(){return this.#n}set width(t){this.#g=x}get height(){return this.#d}set height(t){this.#d=t}}const h=2*Math.PI;class r extends i{static LINE_COLOR="rgb(0, 0, 0)";static BG_THICKNESS=6;static BG_HALF_THICKNESS=r.BG_THICKNESS/2;static BG_COLOR="rgba(255, 255, 255, 0.9)";static TITLE="GOGH";static SUB_TITLE="Inspired by 'Interactive Developer'";#m=[];#x;#u;#R;#S;#T;#I;#p;#v=i.INIT_MODE;constructor(t,e){super(),this.#m=t,this.#S=e,this.#p=0,this.nextImage()}nextImage(){this.#x=this.#m[this.#p],this.#p=(this.#p+1)%this.#m.length,this.resize()}resize(){super.resize(),this.#E(),this.#F()}#E(){const t=this.getSizeMode();if(t===this.#v)return;this.#v=t;let e=0,a=0;switch(t){case i.SMALL_MODE:e=100,a=20;break;case i.REGULAR_MODE:e=200,a=30;break;case i.MEDIUM_MODE:e=300,a=40;break;case i.LARGE_MODE:e=400,a=50;break;default:throw new Error("This canvas size is not possible!")}this.#T=new s(800,e,"Arial"),this.#I=new s(600,a,"Arial")}#F(){const t=Math.floor(this.stageWidth/4),e=t/2;if(this.#u=new a(e,this.stageHeight,t,t*(this.#x.height/this.#x.width)),this.#x.width>this.#x.height){const t=this.stageWidth/this.#u.width;this.#R={x:0,y:Math.round((this.stageHeight-this.#u.height*t)/2),ratio:t}}else{const t=this.stageHeight/this.#u.height;this.#R={x:Math.round((this.stageWidth-this.#u.width*t)/2),y:0,ratio:t}}}getImgParticleInfo(){this.drawImage(this.#x,0,0,this.#x.width,this.#x.height,0,0,this.#u.width,this.#u.height);const t=this.getImageData(0,0,this.#u.width,this.#u.height).data;let e,i=[];for(let s=0;s<this.#u.height;s++)for(let a=0;a<this.#u.width;a++)e=4*(a+s*this.#u.width),i.push({x:a*this.#R.ratio+this.#R.x,y:s*this.#R.ratio+this.#R.y,color:`rgb(${t[e]}, ${t[e+1]}, ${t[e+2]})`});return i}drawLineToParticle(t){this.saveCanvas(),this.setStrokeStyle(r.LINE_COLOR),this.beginPath();const e={x:this.#u.x+(t.x-this.#R.x)/this.#R.ratio,y:this.#u.y+(t.y-this.#R.y)/this.#R.ratio};this.moveTo(t.x,t.y),this.lineTo(e.x,e.y),this.stroke(),this.setFillStyle(t.color),this.beginPath(),this.arc(e.x,e.y,4,0,h),this.fill(),this.restoreCanvas()}drawMovingImage(){this.#w(),this.#M(),this.#y(),this.drawImage(this.#x,0,0,this.#x.width,this.#x.height,this.#u.x,this.#u.y,this.#u.width,this.#u.height),this.#u.y-=this.#S}#w(){this.saveCanvas(),this.setFont(this.#T.font),this.setFillStyle(r.BG_COLOR);const t=this.measureText(r.TITLE);this.fillText(r.TITLE,(this.stageWidth-t.width)/2,(this.stageHeight+t.actualBoundingBoxAscent-t.actualBoundingBoxDescent)/2),this.restoreCanvas()}#M(){this.saveCanvas(),this.setFont(this.#I.font),this.setFillStyle(r.BG_COLOR),this.setTextBaseline("middle");const t=this.measureText(r.SUB_TITLE);this.fillText(r.SUB_TITLE,(this.stageWidth-t.width)/2,50),this.restoreCanvas()}#y(){this.saveCanvas(),this.setFillStyle(r.BG_COLOR),this.fillRect(this.#u.x-r.BG_HALF_THICKNESS,this.#u.y-r.BG_HALF_THICKNESS,this.#u.width+r.BG_THICKNESS,this.#u.height+r.BG_THICKNESS),this.restoreCanvas()}get isDisappeared(){return this.#u.y+1.5*this.#u.height<0}}class n extends i{static MAX_CIRCLES_PER_FRAME=10;static IMAGE_MOVING_SPEED=2;static FPS=10;static FPS_TIME=1e3/n.FPS;static SETTING_VELOCITY=1.03;#_;#L;#f;#C;#P;#G;#b;#O;#D;constructor(t){super(),this.#_=new r(t,n.IMAGE_MOVING_SPEED),this.resize()}init(){this.#C=0,this.#P=1,this.#G=2,this.#b=.2,this.#O=this.getSizeMode()===i.SMALL_MODE?100:200,this.#D=this.getSizeMode()===i.SMALL_MODE?5:10,this.#f=[],this.#f=this.#_.getImgParticleInfo(),this.#L=this.#f.length>1?this.#f.length-1:0}bringToStage(){this.resize(),super.bringToStage(),this.#_.bringToStage()}removeFromStage(){this.#_.removeFromStage(),super.removeFromStage()}resize(){super.resize(),this.#_.resize(),this.init()}animate(t){this.#z(t),this.#y(),this.#_.isDisappeared&&this.#A()}#z(t){this.#C?n.FPS_TIME<t-this.#C&&(this.#B(),this.#H(),this.#C=t):this.#C=t}#B(){this.#G*=n.SETTING_VELOCITY,this.#O>this.#D+this.#G&&(this.#O-=this.#G)}#H(){this.#b*=n.SETTING_VELOCITY,this.#P<n.MAX_CIRCLES_PER_FRAME-this.#b&&(this.#P+=this.#b)}#y(){if(this.#_){this.#_.clearCanvas(),this.#_.drawMovingImage();let t,e,i=0;for(let s=0;s<this.#P;s++)i=Math.round(Math.random()*this.#L),t=this.#f[i],e=s%2,this.#N(t),e&&this.#_.drawLineToParticle(t)}}#N(t){let e;e=Math.random()*this.#O+this.#D,this.beginPath(),this.setFillStyle(t.color),this.arc(t.x,t.y,e,0,h),this.fill()}#A(){this.clearCanvas(),this.#_.nextImage(),this.init()}}return e.default})()));