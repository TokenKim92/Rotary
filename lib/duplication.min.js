/*! For license information please see duplication.min.js.LICENSE.txt */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.DuplicateDraw=e():t.DuplicateDraw=e()}(self,(()=>(()=>{"use strict";var t={d:(e,i)=>{for(var s in i)t.o(i,s)&&!t.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:i[s]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},e={};t.d(e,{default:()=>n});class i{static INIT_MODE=-1;static SMALL_MODE=0;static REGULAR_MODE=1;static MEDIUM_MODE=2;static LARGE_MODE=3;#t;#e;#i;#s;#a;constructor(t=!1){this.#t=document.createElement("canvas"),this.#e=this.#t.getContext("2d"),document.body.append(this.#t),this.#a=t,this.#a&&this.#t.classList.add("canvas-full")}resize(t=0,e=0){const i=Math.max(document.documentElement.clientWidth||0,window.outerWidth||0),s=Math.max(document.documentElement.clientHeight||0,window.outerHeight||0);this.#i=0===t?i:t,this.#s=0===e?s:e,this.#t.width=this.#i,this.#t.height=this.#s}getSizeMode(){const t=[{mode:i.SMALL_MODE,size:500},{mode:i.REGULAR_MODE,size:1e3},{mode:i.MEDIUM_MODE,size:1980},{mode:i.LARGE_MODE,size:3840}],e=t.filter((t=>!window.matchMedia(`(max-width: ${t.size}px)`).matches)).length;return t[e].mode}clearCanvas(){this.#e.clearRect(0,0,this.#i,this.#s)}animateTarget(t,...e){return t(this.#e,...e)}saveCanvas(){this.#e.save()}restoreCanvas(){this.#e.restore()}addEventToCanvas(t,e){this.#t.addEventListener(t,e)}removeEventFromCanvas(t,e){this.#t.removeEventListener(t,e)}bringToStage(){document.body.append(this.#t)}removeFromStage(){this.clearCanvas(),document.body.removeChild(this.#t)}fill(){this.#e.fill()}fillRect(t,e,i,s){this.#e.fillRect(t,e,i,s)}fillText(t,e,i,s){this.#e.fillText(t,e,i,s)}measureText(t){return this.#e.measureText(t)}translate(t,e){this.#e.translate(t,e)}scale(t,e){this.#e.scale(t,e)}rotate(t){this.#e.rotate(t)}beginPath(){this.#e.beginPath()}stroke(){this.#e.stroke()}arc(t,e,i,s,a,h=!1){this.#e.arc(t,e,i,s,a,h)}moveTo(t,e){this.#e.moveTo(t,e)}lineTo(t,e){this.#e.lineTo(t,e)}drawImage(t,e,i,s,a,h,r,n,o){this.#e.drawImage(t,e,i,s,a,h,r,n,o)}getImageData(t,e,i,s,a){return this.#e.getImageData(t,e,i,s,a)}setPosition(t,e){if(this.#a)throw new Error("Positioning is not possible in full screen mode.");this.#t.style.left=`${t}px`,this.#t.style.top=`${e}px`}getFont(){return this.#e.font}setFont(t){return this.#e.font=t}getFillStyle(){return this.#e.fillStyle}setFillStyle(t){this.#e.fillStyle=t}getStrokeStyle(){return this.#e.strokeStyle}setStrokeStyle(t){this.#e.strokeStyle=t}getLineWidth(){return this.#e.lineWidth}setLineWidth(t){this.#e.lineWidth=t}getTextAlign(){return this.#e.textAlign}setTextAlign(t){return this.#e.textAlign=t}getTextBaseline(){return this.#e.textBaseline}setTextBaseline(t){this.#e.textBaseline=t}get stageWidth(){return this.#i}get stageHeight(){return this.#s}get isMatchMedia(){return this.getSizeMode()===i.SMALL_MODE}}class s{#h;#r;#n;constructor(t,e,i){this.#h=t,this.#r=e,this.#n=i}get width(){return this.#h()}get size(){return this.#h()}get size(){return this.#h()}get font(){return`${this.#h} ${this.#r}px ${this.#n}`}}class a{#o;#c;#h;#g;constructor(t,e,i,s){this.#o=t,this.#c=e,this.#h=i,this.#g=s}get x(){return this.#o}set x(t){this.#o=t}get y(){return this.#c}set y(t){this.#c=t}get width(){return this.#h}set width(t){this.#o=x}get height(){return this.#g}set height(t){this.#g=t}}const h=2*Math.PI;class r extends i{static LINE_COLOR="rgb(0, 0, 0)";static BG_THICKNESS=6;static BG_HALF_THICKNESS=r.BG_THICKNESS/2;static BG_COLOR="rgba(255, 255, 255, 0.9)";static TITLE="GOGH";static SUB_TITLE="Inspired by 'Interactive Developer'";#m=[];#d;#l;#u;#x;#S;#T;#I;#R=i.INIT_MODE;constructor(t,e){super(),this.#m=t,this.#x=e,this.#I=0,this.nextImage()}nextImage(){this.#d=this.#m[this.#I],this.#I=(this.#I+1)%this.#m.length,this.resize()}resize(){super.resize(),this.#p(),this.#v()}#p(){const t=this.getSizeMode();if(t===this.#R)return;this.#R=t;let e=0,a=0;switch(t){case i.SMALL_MODE:e=100,a=20;break;case i.REGULAR_MODE:e=200,a=30;break;case i.MEDIUM_MODE:e=300,a=40;break;case i.LARGE_MODE:e=400,a=50;break;default:throw new Error("This canvas size is not possible!")}this.#S=new s(800,e,"Arial"),this.#T=new s(600,a,"Arial")}#v(){const t=Math.floor(this.stageWidth/4),e=t/2;if(this.#l=new a(e,this.stageHeight,t,t*(this.#d.height/this.#d.width)),this.#d.width>this.#d.height){const t=this.stageWidth/this.#l.width;this.#u={x:0,y:Math.round((this.stageHeight-this.#l.height*t)/2),ratio:t}}else{const t=this.stageHeight/this.#l.height;this.#u={x:Math.round((this.stageWidth-this.#l.width*t)/2),y:0,ratio:t}}}getImgParticleInfo(){this.drawImage(this.#d,0,0,this.#d.width,this.#d.height,0,0,this.#l.width,this.#l.height);const t=this.getImageData(0,0,this.#l.width,this.#l.height).data;let e,i=[];for(let s=0;s<this.#l.height;s++)for(let a=0;a<this.#l.width;a++)e=4*(a+s*this.#l.width),i.push({x:a*this.#u.ratio+this.#u.x,y:s*this.#u.ratio+this.#u.y,color:`rgb(${t[e]}, ${t[e+1]}, ${t[e+2]})`});return i}drawLineToParticle(t){this.saveCanvas(),this.setStrokeStyle(r.LINE_COLOR),this.beginPath();const e={x:this.#l.x+(t.x-this.#u.x)/this.#u.ratio,y:this.#l.y+(t.y-this.#u.y)/this.#u.ratio};this.moveTo(t.x,t.y),this.lineTo(e.x,e.y),this.stroke(),this.setFillStyle(t.color),this.beginPath(),this.arc(e.x,e.y,4,0,h),this.fill(),this.restoreCanvas()}drawMovingImage(){this.#E(),this.#M(),this.#F(),this.drawImage(this.#d,0,0,this.#d.width,this.#d.height,this.#l.x,this.#l.y,this.#l.width,this.#l.height),this.#l.y-=this.#x}#E(){this.saveCanvas(),this.setFont(this.#S.font),this.setFillStyle(r.BG_COLOR);const t=this.measureText(r.TITLE);this.fillText(r.TITLE,(this.stageWidth-t.width)/2,(this.stageHeight+t.actualBoundingBoxAscent-t.actualBoundingBoxDescent)/2),this.restoreCanvas()}#M(){this.saveCanvas(),this.setFont(this.#T.font),this.setFillStyle(r.BG_COLOR),this.setTextBaseline("middle");const t=this.measureText(r.SUB_TITLE);this.fillText(r.SUB_TITLE,(this.stageWidth-t.width)/2,50),this.restoreCanvas()}#F(){this.saveCanvas(),this.setFillStyle(r.BG_COLOR),this.fillRect(this.#l.x-r.BG_HALF_THICKNESS,this.#l.y-r.BG_HALF_THICKNESS,this.#l.width+r.BG_THICKNESS,this.#l.height+r.BG_THICKNESS),this.restoreCanvas()}get isDisappeared(){return this.#l.y+1.5*this.#l.height<0}}class n extends i{static MAX_CIRCLES_PER_FRAME=10;static IMAGE_MOVING_SPEED=2;static FPS=10;static FPS_TIME=1e3/n.FPS;static SETTING_VELOCITY=1.03;#w;#L;#_;#y;#f;#C;#P;#G;#O;constructor(t){super(),this.#w=new r(t,n.IMAGE_MOVING_SPEED),this.resize()}init(){this.#y=0,this.#f=1,this.#C=2,this.#P=.2,this.#G=this.getSizeMode()===i.SMALL_MODE?100:200,this.#O=this.getSizeMode()===i.SMALL_MODE?5:10,this.#_=[],this.#_=this.#w.getImgParticleInfo(),this.#L=this.#_.length>1?this.#_.length-1:0}bringToStage(){this.resize(),super.bringToStage(),this.#w.bringToStage()}removeFromStage(){this.#w.removeFromStage(),super.removeFromStage()}resize(){super.resize(),this.#w.resize(),this.init()}animate(t){this.#b(t),this.#F(),this.#w.isDisappeared&&this.#D()}#b(t){this.#y?n.FPS_TIME<t-this.#y&&(this.#z(),this.#A(),this.#y=t):this.#y=t}#z(){this.#C*=n.SETTING_VELOCITY,this.#G>this.#O+this.#C&&(this.#G-=this.#C)}#A(){this.#P*=n.SETTING_VELOCITY,this.#f<n.MAX_CIRCLES_PER_FRAME-this.#P&&(this.#f+=this.#P)}#F(){if(this.#w){this.#w.clearCanvas(),this.#w.drawMovingImage();let t,e,i=0;for(let s=0;s<this.#f;s++)i=Math.round(Math.random()*this.#L),t=this.#_[i],e=s%2,this.#B(t),e&&this.#w.drawLineToParticle(t)}}#B(t){let e;e=Math.random()*this.#G+this.#O,this.beginPath(),this.setFillStyle(t.color),this.arc(t.x,t.y,e,0,h),this.fill()}#D(){this.clearCanvas(),this.#w.nextImage(),this.init()}}return e.default})()));